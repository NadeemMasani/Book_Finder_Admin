(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{23:function(e,t,n){},33:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a,r=n(1),i=n.n(r),c=n(10),s=n.n(c),o=(n(33),n(4)),l=n(13),u=n(2),d=n(3),b=n.n(d),j=n(8),p=n(7),O=(n(35),n(0)),h=function(e){return Object(O.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},x=n(24),v="REQUIRE",m="MINLENGTH",f="MAXLENGTH",g="EMAIL",k=function(){return{type:v}},y=function(e,t){var n,a=!0,r=Object(x.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.type===v&&(a=a&&e.trim().length>0),i.type===m&&(a=a&&e.trim().length>=i.val),i.type===f&&(a=a&&e.trim().length<=i.val),"MIN"===i.type&&(a=a&&+e>=i.val),"MAX"===i.type&&(a=a&&+e<=i.val),i.type===g&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(c){r.e(c)}finally{r.f()}return a},C=(n(37),function(e,t){switch(t.type){case"CHANGE":return Object(p.a)(Object(p.a)({},e),{},{value:t.val,isValid:y(t.val,t.validators)});case"TOUCH":return Object(p.a)(Object(p.a)({},e),{},{isTouched:!0});default:return e}}),I=function(e){var t=Object(r.useReducer)(C,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),n=Object(u.a)(t,2),a=n[0],i=n[1],c=e.id,s=e.onInput,o=a.value,l=a.isValid;Object(r.useEffect)((function(){s(c,o,l)}),[c,o,l,s]);var d=function(t){i({type:"CHANGE",val:t.target.value,validators:e.validators})},b=function(){i({type:"TOUCH"})},j="input"===e.element?Object(O.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:d,onBlur:b,value:a.value}):Object(O.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:d,onBlur:b,value:a.value});return Object(O.jsxs)("div",{className:"form-control ".concat(!a.isValid&&a.isTouched&&"form-control--invalid"),children:[Object(O.jsx)("label",{htmlFor:e.id,children:e.label}),j,!a.isValid&&a.isTouched&&Object(O.jsx)("p",{children:e.errorText})]})},N=(n(38),function(e){return e.href?Object(O.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(O.jsx)(l.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(O.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),w=n(55),T=(n(43),function(e){return s.a.createPortal(Object(O.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),S=(n(44),function(e){var t=Object(O.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(O.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(O.jsx)("h2",{children:e.header})}),Object(O.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(O.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(O.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))}),V=function(e){return Object(O.jsxs)(i.a.Fragment,{children:[e.show&&Object(O.jsx)(T,{onClick:e.onCancel}),Object(O.jsx)(w.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(O.jsx)(S,Object(p.a)({},e))})]})},E=function(e){return Object(O.jsx)(V,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(O.jsx)(N,{onClick:e.onClear,children:"Okay"}),children:Object(O.jsx)("p",{children:e.error})})},P=(n(45),function(e){return Object(O.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(O.jsx)("div",{className:"lds-dual-ring"})})}),L=n(15),D=function(e,t){switch(t.type){case"INPUT_CHANGE":var n=!0;for(var a in e.inputs)e.inputs[a]&&(n=a===t.inputId?n&&t.isValid:n&&e.inputs[a].isValid);return Object(p.a)(Object(p.a)({},e),{},{inputs:Object(p.a)(Object(p.a)({},e.inputs),{},Object(L.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:n});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},A=function(e,t){var n=Object(r.useReducer)(D,{inputs:e,isValid:t}),a=Object(u.a)(n,2),i=a[0],c=a[1];return[i,Object(r.useCallback)((function(e,t,n){c({type:"INPUT_CHANGE",value:t,isValid:n,inputId:e})}),[]),Object(r.useCallback)((function(e,t){c({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},B=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),c=Object(u.a)(i,2),s=c[0],o=c[1],l=Object(r.useRef)([]),d=Object(r.useCallback)(function(){var e=Object(j.a)(b.a.mark((function e(t){var n,r,i,c,s,u,d=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"GET",r=d.length>2&&void 0!==d[2]?d[2]:null,i=d.length>3&&void 0!==d[3]?d[3]:{},a(!0),c=new AbortController,l.current.push(c),e.prev=6,e.next=9,fetch(t,{method:n,body:r,headers:i,signal:c.signal});case 9:return s=e.sent,e.next=12,s.json();case 12:if(u=e.sent,l.current=l.current.filter((function(e){return e!==c})),s.ok){e.next=16;break}throw new Error(u.message);case 16:return a(!1),e.abrupt("return",u);case 20:throw e.prev=20,e.t0=e.catch(6),o(e.t0.message),a(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:s,sendRequest:d,clearError:function(){o(null)}}},_=Object(r.createContext)({isLoggedIn:!1,userId:null,token:null,libId:null,login:function(){},logout:function(){}}),z=(n(46),function(){var e,t=Object(r.useContext)(_),n=Object(r.useState)(!0),a=Object(u.a)(n,2),c=a[0],s=a[1],o=B(),l=o.isLoading,d=o.error,x=o.sendRequest,v=o.clearError,f=A({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),y=Object(u.a)(f,3),C=y[0],w=y[1],T=y[2],S=function(){var e=Object(j.a)(b.a.mark((function e(n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!c){e.next=13;break}return e.prev=2,e.next=5,x("".concat("https://book-finder-admin.herokuapp.com","/api/admin/login"),"POST",JSON.stringify({email:C.inputs.email.value,password:C.inputs.password.value}),{"Content-Type":"application/json"});case 5:a=e.sent,t.login(a.userId,a.token,a.libId),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:e.next=26;break;case 13:return e.prev=13,e.next=16,x("".concat("https://book-finder-admin.herokuapp.com","/api/admin/signup"),"POST",JSON.stringify({name:C.inputs.name.value,email:C.inputs.email.value,password:C.inputs.password.value,address:C.inputs.address.value,country:C.inputs.country.value,city:C.inputs.city.value,zip:C.inputs.zip.value,zip4:C.inputs.zip4.value}),{"Content-Type":"application/json"});case 16:r=e.sent,t.libId=r.libid,t.userId=r.userId,console.log(r),t.login(r.userId,r.token,r.libid),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(13),console.log(e.t1);case 26:case"end":return e.stop()}}),e,null,[[2,9],[13,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(E,{error:d,onClear:v}),Object(O.jsxs)(h,{className:"authentication",children:[l&&Object(O.jsx)(P,{asOverlay:!0}),c?Object(O.jsx)("h2",{children:" Login Required"}):Object(O.jsx)("h2",{children:"Welcome to SignUp : Book Finder"}),Object(O.jsx)("hr",{}),Object(O.jsxs)("form",{onSubmit:S,children:[!c&&Object(O.jsx)(I,{element:"input",id:"name",type:"text",label:"Library Name",validators:[k()],errorText:"Please enter a name.",onInput:w}),!c&&Object(O.jsx)(I,{element:"input",id:"address",type:"text",label:"Address",validators:[k()],errorText:"Please enter a address.",onInput:w}),Object(O.jsx)(I,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[{type:g}],errorText:"Please enter a valid email address.",onInput:w}),Object(O.jsx)(I,{element:"input",id:"password",type:"password",label:"Password",validators:[(e=6,{type:m,val:e})],errorText:"Please enter a valid password, at least 6 characters.",onInput:w}),!c&&Object(O.jsx)(I,{element:"input",id:"country",type:"text",label:"Country",validators:[k()],errorText:"Please enter country.",onInput:w}),!c&&Object(O.jsx)(I,{element:"input",id:"city",type:"text",label:"city",validators:[k()],errorText:"Please enter city.",onInput:w}),!c&&Object(O.jsx)(I,{element:"input",id:"zip",type:"text",label:"zip",validators:[k()],errorText:"Please enter zip.",onInput:w}),!c&&Object(O.jsx)(I,{element:"input",id:"zip4",type:"text",label:"zip4",validators:[k()],errorText:"Please enter zip4.",onInput:w}),Object(O.jsx)(N,{type:"submit",disabled:!C.isValid,children:c?"LOGIN":"SIGNUP"})]}),Object(O.jsxs)(N,{inverse:!0,onClick:function(){c?T(Object(p.a)(Object(p.a)({},C.inputs),{},{name:{value:"",isValid:!1},address:{value:"",isValid:!1},country:{value:"",isValid:!1},city:{value:"",isValid:!1},zip:{value:null,isValid:!1},zip4:{value:null,isValid:!1}}),!1):T(Object(p.a)(Object(p.a)({},C.inputs),{},{name:void 0,address:void 0,country:void 0,city:void 0,zip:void 0,zip4:void 0}),C.inputs.email.isValid&&C.inputs.password.isValid),s((function(e){return!e}))},children:["SWITCH TO ",c?"SIGNUP":"LOGIN"]})]})]})}),F=(n(47),function(e){var t=Object(r.useContext)(_),n=B(),a=n.isLoading,c=n.sendRequest,s=Object(r.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],p=function(){d(!1)},x=function(){var n=Object(j.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!1),n.prev=1,n.next=4,c("".concat("https://book-finder-admin.herokuapp.com","/api/library/book/").concat(t.libId,"/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+t.token});case 4:e.onDelete(e.id),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(){return n.apply(this,arguments)}}();return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(V,{show:l,onCancel:p,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(N,{inverse:!0,onClick:p,children:"CANCEL"}),Object(O.jsx)(N,{danger:!0,onClick:x,children:"DELETE"})]}),children:Object(O.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone thereafter."})}),Object(O.jsx)("li",{className:"book_item",children:Object(O.jsxs)(h,{children:[a&&Object(O.jsx)(P,{asOverlay:!0}),Object(O.jsxs)("div",{className:"book-position",children:[Object(O.jsxs)("div",{className:"align-left",children:[Object(O.jsx)("span",{children:e.name}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{children:["Author :  ",e.author," "]}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{children:["Category: ",e.category]}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{children:["ISBN No: ",e.isbn]}),Object(O.jsx)("br",{})]}),Object(O.jsxs)("div",{className:"align-right",children:[Object(O.jsx)(N,{to:"/book/".concat(e.id),children:" Update Book"}),Object(O.jsx)(N,{danger:!0,onClick:function(){d(!0)},children:" Delete Book"})]})]})]})})]})}),R=(n(48),function(e){return 0===e.items.length?Object(O.jsx)("div",{className:"no-books",children:Object(O.jsx)("h2",{children:"No Books Found Please try a different Search"})}):Object(O.jsx)("div",{children:Object(O.jsxs)("ul",{className:"books-list",children:[Object(O.jsx)("h4",{className:"list-name",children:" List of Current Books in the Library"}),e.items.map((function(t){return Object(O.jsx)(F,{id:t.id,name:t.name,author:t.author,isbn:t.isbn,category:t.category,onDelete:e.onDeleteBook,publisher:t.publisher},t.id)}))]})})}),G=(n(49),n(26)),H=n.n(G),U=function(e){var t=e.library,n=Object(r.useContext)(_),a=B(),c=a.isLoading,s=a.error,o=a.sendRequest,l=a.clearError,d=Object(r.useState)([]),p=Object(u.a)(d,2),h=p[0],x=p[1],v=Object(r.useState)(1),m=Object(u.a)(v,2),f=m[0],g=m[1],k=Object(r.useState)(10),y=Object(u.a)(k,1)[0];Object(r.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("".concat("https://book-finder-admin.herokuapp.com","/api/library/").concat(n.libId,"/books"));case 3:t=e.sent,x(t.books),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[o,n.libId]);var C=f*y,I=C-y,N=h.slice(I,C);return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(E,{error:s,onClear:l}),Object(O.jsxs)("div",{className:"lib-name",children:[Object(O.jsxs)("h4",{children:["Current Library Account : ",t.name]}),Object(O.jsxs)("span",{children:["Library Address : ",t.address,", ",t.city,", ",t.zip]})]}),c&&Object(O.jsx)("div",{className:"center",children:Object(O.jsx)(P,{})}),!c&&h&&h.length>0&&Object(O.jsx)(R,{items:N,onDeleteBook:function(e){x((function(t){return t.filter((function(t){return t.id!==e}))}))}}),Object(O.jsx)(H.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(h.length/10),marginPagesDisplayed:3,pageRangeDisplayed:5,onPageChange:function(e){g(e.selected+1),console.log(e)},containerClassName:"pagination",activeClassName:"active",pageClassName:"page-link",previousClassName:"prev-link",nextClassName:"next-link",pageLinkClassName:"a-link"})]})},q=function(e){var t=Object(r.useContext)(_),n=B(),a=n.isLoading,c=n.error,s=n.sendRequest,o=n.clearError,l=Object(r.useState)(),d=Object(u.a)(l,2),p=d[0],h=d[1];return console.log(e.lid),Object(r.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("".concat("https://book-finder-admin.herokuapp.com","/api/library/").concat(t.libId));case 3:n=e.sent,h(n.library),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()(),console.log("Hello")}),[s,t.libId]),Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(E,{error:c,onClear:o}),a&&Object(O.jsx)("div",{className:"center",children:Object(O.jsx)(P,{})}),!a&&p&&Object(O.jsx)(U,{library:p})]})},J=(n(50),function(e){return Object(O.jsx)("header",{className:"main-header",children:e.children})}),M=(n(51),function(e){var t=Object(r.useContext)(_);return Object(O.jsxs)("ul",{className:"nav-links",children:[t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)(l.c,{to:"/new",children:"Add Books"})}),t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)("button",{onClick:t.logout,children:"LOGOUT"})})]})}),W=(n(52),function(e){var t=Object(O.jsx)(w.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(O.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return s.a.createPortal(t,document.getElementById("drawer-hook"))}),X=(n(53),function(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],s=function(){c(!1)};return Object(O.jsxs)(i.a.Fragment,{children:[a&&Object(O.jsx)(T,{onClick:s}),Object(O.jsx)(W,{show:a,onClick:s,children:Object(O.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(O.jsx)(M,{})})}),Object(O.jsxs)(J,{children:[Object(O.jsxs)("button",{className:"main-navigation__menu-btn",onClick:function(){c(!0)},children:[Object(O.jsx)("span",{}),Object(O.jsx)("span",{}),Object(O.jsx)("span",{})]}),Object(O.jsx)("h1",{className:"main-navigation__title",children:Object(O.jsx)(l.b,{to:"/",children:"Book Finder Admin Site"})}),Object(O.jsx)("nav",{className:"main-navigation__header-nav",children:Object(O.jsx)(M,{})})]})]})}),Q=(n(23),function(){var e=Object(r.useContext)(_),t=B(),n=t.isLoading,a=t.error,c=t.sendRequest,s=t.clearError,l=A({name:{value:"",isValid:!1},author:{value:"",isValid:!1},category:{value:"",isValid:!1},isbn:{value:null,isValid:!1},publisher:{value:"",isValid:!1}},!1),d=Object(u.a)(l,2),p=d[0],h=d[1],x=Object(o.g)(),v=function(){var t=Object(j.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,console.log("Hi from add"),console.log(e.libId),t.next=6,c("".concat("https://book-finder-admin.herokuapp.com","/api/library/").concat(e.libId),"POST",JSON.stringify({name:p.inputs.name.value,author:p.inputs.author.value,category:p.inputs.category.value,isbn:p.inputs.isbn.value,publisher:p.inputs.publisher.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 6:x.push("/"),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(E,{error:a,onClear:s}),Object(O.jsxs)("form",{className:"place-form",onSubmit:v,children:[n&&Object(O.jsx)(P,{asOverlay:!0}),Object(O.jsx)(I,{id:"name",element:"input",type:"text",label:"Book Name",validators:[k()],errorText:"Please enter a valid title.",onInput:h}),Object(O.jsx)(I,{id:"author",element:"input",label:"Author",validators:[k()],errorText:"Please enter a valid description (at least 5 characters).",onInput:h}),Object(O.jsx)(I,{id:"category",element:"input",label:"Category",validators:[k()],errorText:"Please enter a valid address.",onInput:h}),Object(O.jsx)(I,{id:"isbn",element:"input",label:"ISBN No:",validators:[k()],errorText:"Please enter a valid address.",onInput:h}),Object(O.jsx)(I,{id:"publisher",element:"input",label:"Publisher",validators:[k()],errorText:"Please enter a valid address.",onInput:h}),Object(O.jsx)(N,{type:"submit",disabled:!p.isValid,children:"ADD Book"})]})]})}),$=function(){var e=Object(o.g)(),t=Object(r.useContext)(_),n=B(),a=n.isLoading,c=n.error,s=n.sendRequest,l=n.clearError,d=Object(o.h)().bid,p=Object(r.useState)(),x=Object(u.a)(p,2),v=x[0],m=x[1],f=A({name:{value:"",isValid:!1},author:{value:"",isValid:!1},category:{value:"",isValid:!1},isbn:{value:null,isValid:!1},publisher:{value:"",isValid:!1}},!1),g=Object(u.a)(f,3),y=g[0],C=g[1],w=g[2];Object(r.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("".concat("https://book-finder-admin.herokuapp.com","/api/library/book/").concat(d));case 3:t=e.sent,m(t.book),w({name:{value:t.book.name,isValid:!0},author:{value:t.book.author,isValid:!0},category:{value:t.book.category,isValid:!0},isbn:{value:t.book.isbn,isValid:!0},publisher:{value:t.book.publisher,isValid:!0}},!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[s,d,w]);var T=function(){var n=Object(j.a)(b.a.mark((function n(a){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.prev=1,n.next=4,s("".concat("https://book-finder-admin.herokuapp.com","/api/library/book/").concat(d),"PATCH",JSON.stringify({name:y.inputs.name.value,author:y.inputs.author.value,category:y.inputs.category.value,isbn:y.inputs.isbn.value,publisher:y.inputs.publisher.value}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 4:e.push("/"),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}();return a?Object(O.jsx)("div",{className:"center",children:Object(O.jsx)(P,{})}):v||c?Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(E,{error:c,onClear:l}),Object(O.jsxs)("form",{className:"place-form",onSubmit:T,children:[a&&Object(O.jsx)(P,{asOverlay:!0}),Object(O.jsx)(I,{id:"name",element:"input",type:"text",label:"Book Name",validators:[k()],errorText:"Please enter a valid title.",initialValue:v.name,onInput:C}),Object(O.jsx)(I,{id:"author",element:"input",label:"Author",validators:[k()],errorText:"Please enter a valid description (at least 5 characters).",onInput:C,initialValue:v.author}),Object(O.jsx)(I,{id:"category",element:"input",label:"Category",validators:[k()],errorText:"Please enter a valid address.",onInput:C,initialValue:v.category}),Object(O.jsx)(I,{id:"isbn",element:"input",label:"ISBN No:",validators:[k()],errorText:"Please enter a valid address.",onInput:C,initialValue:v.isbn}),Object(O.jsx)(I,{id:"publisher",element:"input",label:"Publisher",validators:[k()],errorText:"Please enter a valid address.",onInput:C,initialValue:v.publisher}),Object(O.jsx)(N,{type:"submit",disabled:y.isValid,children:"ADD Book"})]})]}):Object(O.jsx)("div",{className:"center",children:Object(O.jsx)(h,{children:Object(O.jsx)("h2",{children:"Could not find Book!"})})})},K=function(){var e,t=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(),s=Object(u.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(!1),b=Object(u.a)(d,2),j=b[0],p=b[1],O=Object(r.useState)(!1),h=Object(u.a)(O,2),x=h[0],v=h[1],m=Object(r.useCallback)((function(e,t,n,a){i(t),p(e),v(n),console.log(x),console.log(j);var r=a||new Date((new Date).getTime()+36e5);l(r),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,libId:n,expiration:r.toISOString()}))}),[]),f=Object(r.useCallback)((function(){i(null),l(null),p(null),v(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(n&&o){var e=o.getTime()-(new Date).getTime();a=setTimeout(f,e)}else clearTimeout(a)}),[n,f,o]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&m(e.userId,e.token,e.libId,new Date(e.expiration))}),[m]),{token:n,login:m,logout:f,userId:j,libId:x}}(),n=t.token,i=t.login,c=t.logout,s=t.userId,d=t.libId;return Object(r.useEffect)((function(){console.log("hello"),console.log(d)}),[d]),e=n?Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:"/",exact:!0,children:d?Object(O.jsx)(q,{lid:d}):Object(O.jsx)(P,{})}),Object(O.jsx)(o.b,{path:"/new",exact:!0,children:Object(O.jsx)(Q,{})}),Object(O.jsx)(o.b,{path:"/book/:bid",exact:!0,children:Object(O.jsx)($,{})}),Object(O.jsx)(o.a,{to:"/"})]}):Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:"/auth",exact:!0,children:Object(O.jsx)(z,{})}),Object(O.jsx)(o.a,{to:"/auth"})]}),Object(O.jsx)(_.Provider,{value:{isLoggedIn:!!n,token:n,userId:s,libId:d,login:i,logout:c},children:Object(O.jsxs)(l.a,{children:[Object(O.jsx)(X,{}),Object(O.jsx)("main",{children:e})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};s.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(K,{})}),document.getElementById("root")),Y()}},[[54,1,2]]]);
//# sourceMappingURL=main.e72795e2.chunk.js.map